$(function(){function i(){$(".movie_list ul").empty(),$(".container .index .movie").hide(),$.ajax({url:"data/videos.csv?v="+(new Date).getTime()}).done(function(i){var e=JSON.parse(CSV2JSON(i)),t="",o=0;$.each(e,function(i,e){var n=!(e.isShow&&"Y"!=e.isShow||e.displayDate&&!p(e.displayDate));if(n&&e.videoType){var a=e.videoName?e.videoName:"",s=e.videoDate?e.videoDate:"",l=e.thumbnailImage?e.thumbnailImage:"vThumbnail_01.jpg",r=e.videoType.toLowerCase();t+='<li class="frame" data-type="'+r+'" data-video-id="'+e.videoId+'" data-video-channel="'+e.videoChannel+'"><div class="thumbnail"><img src="imgs/video-thumbnails/'+l+'"><div class="btn_play"></div></div><div class="text_wrapper"><div class="text_size_04 video_name">'+a+'</div><div class="video_date">'+s+"</div></div></li>",o++}}),t.length>0&&($(".movie_list ul").html(t),$(".container .index .movie").show(),o>=6&&($(".movie_list ul li").css("margin","0 20px"),b())),$(".movie_list li:first").hasClass("selected")||$(".movie_list li:first").trigger("click")}).fail(function(){console.log("error: setVideoList")})}function e(){$(".album_list").empty(),$(".album_wrapper").hide(),$.ajax({url:"data/album_list.csv?v="+(new Date).getTime()}).done(function(i){var e=0,t=JSON.parse(CSV2JSON(i)),o="";$.each(t,function(i,t){var n=!t.isShow||"Y"==video.isShow;n&&t.albumNo&&(o+='<li data-index="'+t.albumNo+'"><div class="album_img"><img src="imgs/albums/album-covers/'+t.albumCover+'"></div><div class="album_date">'+t.albumDate+"</div></li>",e++)}),o.length>0&&($(".album_list").html(o),$(".album_wrapper").show(),e>=6&&($(".album_list li").css("margin","0 20px"),g()))}).fail(function(){console.log("error: setAlbumList")})}i(),e();var t=function(){var i=new Date("Fri May 01 2015 08:00:00 GMT+0200"),e=28,t=$(window).width();1400>=t?e=22:1024>=t&&(e=18),$("#countdown").remove(),$(".timer").prepend('<div id="countdown"></div>'),$("#countdown").timeTo({timeTo:i,fontSize:e,displayDays:2})};t(),$(document).on("click",".btn-menu-buy, .btn-menu-pro",function(i){i.preventDefault(),$("body, html").animate({scrollTop:$(".product").offset().top},200)}),$(document).on("click",".btn-menu-download",function(i){i.preventDefault(),$(".lightbox-wrapper").height($(window).height()),$(".lightbox.download").show(),$(".screen .video").css("visibility","hidden")}),$(document).on("click",".btn-buy",function(i){i.preventDefault();var e=$(this).parents("li.list_item").data("country-list");e&&(o(e),$(".lightbox.toBuy").show().css("visibility","hidden"),$(".country_list li").css("height",$(".country_list").height()),$(".lightbox-wrapper").height($(window).height()),$(".lightbox.toBuy").css("visibility","visible"),$(".screen .video").css("visibility","hidden"))});var o=function(i){var e="";$.each(i,function(i,t){e+='<li><div class="country_icon '+t.countryName+'"></div><div class="store">'+n(t.storeList)+"</div></li>"}),$(".lightbox.toBuy ul.country_list").html(e)},n=function(i){var e="";return $.each(i,function(i,t){t.buyLink?e+='<a href="'+t.buyLink+'" class="name" target="_blank">'+t.storeName+"</a>":t.variations&&(e+='<div><div class="name">'+t.storeName+"</div>",$.each(t.variations,function(i,t){e+='<a href="'+t.buyLink+'" class="variation_name" target="_blank">'+t.name+"</a>"}),e+="</div>")}),e};$(document).on("click",".lightbox .close",function(i){i.preventDefault(),$(".lightbox").hide(),$(".screen .video").css("visibility","visible")}),$(document).on("click",".movie_list li",function(i){if(i.preventDefault(),!$(this).hasClass("selected")){$(".movie_list li").removeClass("selected"),$(this).addClass("selected");var e=$(this).data("type"),t=$(this).data("video-id"),o=$(this).data("video-channel");$("#video_player").empty(),$(".video").css("visibility","hidden"),"youtube"==e?a(t):"twitch"==e&&s(t,o)}}),$(document).on("click",".scrolldown_container",function(i){i.preventDefault(),$("body, html").animate({scrollTop:$(".video").offset().top+$(".video").outerHeight()},500,function(){$(".scrolldown_container").css("bottom",$(".index").outerHeight()-$(".video").offset().top-$(".video").outerHeight())})});var a=function(i){var e='<iframe width="'+$(".screen .video").outerWidth()+'" height="'+$(".screen .video").outerHeight()+'" src="https://www.youtube.com/embed/'+i+'" frameborder="0" allowfullscreen></iframe>';$("#video_player").html(e),$(".screen .video").css("visibility","visible")},s=function(i,e){var t="";!i&&e?t='<iframe src="http://www.twitch.tv/'+e+'/embed" frameborder="0" scrolling="no" height="'+$(".screen .video").outerHeight()+'" width="'+$(".screen .video").outerWidth()+'"></iframe>':i&&e&&(t='<object bgcolor="#000000" data="http://www.twitch.tv/swflibs/TwitchPlayer.swf" height="'+$(".screen .video").outerHeight()+'"  width="'+$(".screen .video").outerWidth()+'" id="clip_embed_player_flash" type="application/x-shockwave-flash"><param name="movie" value="http://www.twitch.tv/swflibs/TwitchPlayer.swf" /><param name="allowScriptAccess" value="always" /><param name="allowNetworking" value="all" /><param name="allowFullScreen" value="true" /><param name="flashvars" value="channel='+e+"&amp;auto_play=false&amp;start_volume=25&amp;videoId=v"+i+'&amp;device_id=8a4b98c5339d86c3" /></object>'),t&&($("#video_player").html(t),$(".screen .video").css("visibility","visible"))};$(".movie_list li:first").trigger("click"),$(window).resize(function(){$(window).width()<1024?$("body").addClass("mobile"):$("body").removeClass("mobile"),$(".movie_list ul li.selected").removeClass("selected").trigger("click"),r(),t(),$(".lightbox-wrapper").height($(window).height()),m()});var l=function(){$.ajax({url:"data/buyLink.json?v="+(new Date).getTime()}).done(function(i){$.each(i,function(i,e){var t=e.productId;$(".list_item."+t).data("country-list",e.countryList)})})};l(),$(window).scroll(function(){r()});var r=function(){var i=$(".container .index").outerHeight(),e=$(window).height(),t=$(window).scrollTop();e+t>=i?($(".box-bage, .scrolldown_container").addClass("stop"),$(".scrolldown_container").css("bottom",$(".index").outerHeight()-$(".video").offset().top-$(".video").outerHeight())):($(".box-bage, .scrolldown_container").removeClass("stop"),$(".scrolldown_container").removeAttr("style"))};r();{var c=function(){var i=$(".btn_scrolldown").css("background-position"),e=parseInt(i.split(" ")[1]),t=-91;3*t>=e?e=0:e+=t,$(".btn_scrolldown").css("background-position","0 "+e+"px")},d=(setInterval(function(){c()},175),function(){$(".banner_teams .group1").is(":visible")?($(".banner_teams .group1").hide(),$(".banner_teams .group2").fadeIn("slow")):($(".banner_teams .group2").hide(),$(".banner_teams .group1").fadeIn("slow"))});setInterval(function(){d()},4e3)}$(window).load(function(){$(".movie_list li:first").trigger("click"),$(window).width()<1024?$("body").addClass("mobile"):$("body").removeClass("mobile"),v(),m()});var h=120;$(".product .list_item .info").readmore({collapsedHeight:h,moreLink:'<div class="readmore_container clearfix"><a href="#">...(more)</a></div>',lessLink:'<div class="readmore_container clearfix"><div class="rm_arrow up"></div><a href="#">close</a></div>',beforeToggle:function(i,e,t){t&&$(e).css("padding-bottom",0),f()&&setTimeout(function(){u(e,t)},50)},afterToggle:function(i,e,t){var o=$(e).height()+$(e).prev(".model").height();$(e).parents(".list").find("li.list_item").each(function(){$(this).find(".info").height()+$(this).find(".model").height()>o&&(o=$(this).find(".info").height()+$(this).find(".model").height())}),$(e).parents(".list").find(".info").each(function(){var i=$(this).height()+$(this).prev(".model").height();$(this).height()>h&&o>i&&$(this).next(".readmore_container").css("padding-bottom",o-i+"px")}),t||$(e).css("padding-bottom",0),v()}});var v=function(){$(".product .list li.list_item").height("auto"),$(".product .list").each(function(){var i=0;$(this).find("li.list_item").each(function(){$(this).height()>i&&(i=$(this).height())}),$(this).find("li.list_item").height(i)})},u=function(i,e){var t=$(i).height()+$(i).prev(".model").height();$(i).parents(".list").find("li.list_item").each(function(){$(this).find(".info").height()+$(this).find(".model").height()>t&&(t=$(this).find(".info").height()+$(this).find(".model").height())}),$(i).parents(".list").find(".info").each(function(){var i=$(this).height()+$(this).prev(".model").height();$(this).height()>h&&t>i&&$(this).next(".readmore_container").css("padding-bottom",t-i+"px")}),e||$(i).css("padding-bottom",0),v()},m=function(){var i=$(".special").height();$(".gamer,.team").height(i)},f=function(){return $.browser.msie&&(parseFloat($.browser.version)<10||parseFloat(document.documentMode)<10)};$(window).scroll(function(){$(this).scrollTop()>=400?$(".btn_backtop").show():$(".btn_backtop").hide()}),$(document).on("click",".btn_backtop",function(i){i.preventDefault(),$("body, html").animate({scrollTop:0},200)});var b=function(){$(".movie_list ul").carouFredSel({responsive:!0,scroll:1,items:{visible:6,height:"90%"},infinite:!1,auto:!1,prev:{button:".video_arrow.prev"},next:{button:".video_arrow.next"}})},p=function(i){var e=(new Date).toUTCString(),t=new Date(e).getTime(),o=new Date(i+" GMT+0200").toUTCString(),n=new Date(o).getTime();return t>=n?!0:!1},g=function(){$(".album_list").carouFredSel({responsive:!0,scroll:1,items:{visible:6,height:"70%"},infinite:!1,auto:!1,prev:{button:".album_arrow.prev"},next:{button:".album_arrow.next"}})};$(document).on("click",".album_list li",function(i){i.preventDefault(),$(".lightbox-wrapper").height($(window).height()),w($(this).data("index")),$(".screen .video").css("visibility","hidden")});var w=function(i){$(".photobox_list").empty(),$(".lightbox.photobox").hide(),$.ajax({url:"data/photo_list.csv?v="+(new Date).getTime()}).done(function(e){var t=JSON.parse(CSV2JSON(e)),o="";$.each(t,function(e,t){var n=!t.isShow||"Y"==t.isShow;n&&t.albumNo&&t.albumNo==i&&(o+='<li><img src="imgs/albums/'+t.albumNo+"/"+t.photoUrl+'"></li>')}),o.length>0&&($(".photobox_list").html(o),$(".lightbox.photobox").show())}).fail(function(){console.log("error: setPhotoList")})}});